var canonicalLatestNews=function(e){"use strict";function n(){var e=document.querySelector("[data-js='latest-news']");e&&e.classList.remove("u-hide")}function L(e){var t=new Date(e);return t.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getFullYear()}function l(e,t,r){var a,n,i,l,d,o=y(t),c=o.querySelector(".article-time"),s=o.querySelector(".article-link"),u=o.querySelector(".article-title"),h=o.querySelector(".article-image"),m=o.querySelector(".article-author"),p=o.querySelector(".article-excerpt"),g=o.querySelector(".article-group"),f="",b=document.createElement("a");if(r.hostname&&(f="https://"+r.hostname),e._embedded&&e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0]&&e._embedded["wp:featuredmedia"][0].media_details&&e._embedded["wp:featuredmedia"][0].media_details.width&&e._embedded["wp:featuredmedia"][0].media_details.height&&(n={url:(a=e._embedded["wp:featuredmedia"][0]).source_url,alt:a.alt_text,width:a.media_details.width,height:a.media_details.height}),m&&(m.innerHTML=e.author.name),p)if(r.excerptLength){var w=e.excerpt.rendered;if(w.length<=r.excerptLength)p.innerHTML=w;else{var v=w.lastIndexOf(" ",r.excerptLength);-1===v&&(v=r.excerptLength);for(var _=(w=w.substring(0,v)).length-1;0<=_&&!/[a-zA-Z0-9]/.test(w[_]);_--)w=w.substring(0,_);p.innerHTML=w+"&hellip;"}}else p.innerHTML=e.excerpt.rendered;return g&&(g.innerHTML=e.group.name),c&&(c.setAttribute("datetime",e.date),c.innerText=L(e.date)),s&&(s.href=f+"/blog/"+e.slug,r.gtmEventLabel&&(s.onclick=function(){dataLayer.push({event:"GAEvent",eventCategory:"blog",eventAction:r.gtmEventLabel+" news link",eventLabel:e.slug})})),u&&(u.innerHTML=e.title.rendered),h&&n&&r.linkImage&&(b.href=f+"/blog/"+e.slug,h.appendChild(b)),h&&n&&(i=document.createElement("img"),l=!1!==r.lazyLoadImage,d="https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize"+",w_".concat(n.width,"/"),i.setAttribute("src",d+n.url),i.setAttribute("alt",n.alt),i.setAttribute("loading",l?"lazy":"auto"),i.setAttribute("width",n.width),i.setAttribute("height",n.height),r.linkImage?b.appendChild(i):h.appendChild(i)),o}function y(e){var t,r=document.querySelector(e);if("content"in r)t=document.importNode(r.content,!0);else{t=document.createDocumentFragment();for(var a=0;a<r.childNodes.length;a++)t.appendChild(r.childNodes[a].cloneNode(!0))}return t}function i(i){return function(e){var t=document.querySelector(i.articlesContainerSelector);if(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild);var r,a,n=JSON.parse(e.target.responseText);"spotlightContainerSelector"in i&&((r=document.querySelector(i.spotlightContainerSelector))?(a=n.latest_pinned_articles[0])&&r.appendChild(l(a,i.spotlightTemplateSelector,i)):console.warn("latest-news: No spotlight container found")),n.latest_articles&&n.latest_articles.forEach(function(e){t.appendChild(l(e,i.articleTemplateSelector,i))})}else console.warn("latest-news: No articles container found")}}function t(e){var t="https://ubuntu.com/blog/latest-news",r=[];n(),e.limit&&r.push("limit="+e.limit),e.tagIds?e.tagIds.split(",").map(function(e){return e.trim()}).forEach(function(e){r.push("tag-id="+encodeURIComponent(e))}):void 0!==e.tagId&&r.push("tag-id="+encodeURIComponent(e.tagId)),e.groupId&&r.push("group-id="+e.groupId),r.length&&(t+="?"+r.join("&"));var a=new XMLHttpRequest;a.addEventListener("load",i(e)),a.open("GET",t),a.send()}return void 0===window.fetchLatestNews&&(window.fetchLatestNews=t),e.articleDiv=l,e.fetchLatestNews=t,e.formatDate=L,e.getTemplate=y,e.latestArticlesCallback=i,e.revealSection=n,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=latest-news.js.map
